<style>
  .quote-builder {
    max-width: 900px;
    margin: auto;
    padding: 24px;
    font-family: system-ui, -apple-system, BlinkMacSystemFont;
  }

  .qb-step {
    margin-bottom: 36px;
  }

  .qb-options {
    display: grid;
    gap: 16px;
  }

  .qb-card {
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 16px;
    background: #fff;
    cursor: pointer;
    position: relative;
    transition: border 0.2s, box-shadow 0.2s, transform 0.05s;
  }

  .qb-card:hover {
    border-color: #16c800;
  }

  .qb-card.selected {
    border-color: #16c800;
    box-shadow: 0 6px 20px rgba(22,200,0,0.2);
  }

  .qb-card h4 {
    margin: 0 0 6px 0;
  }

  .qb-card p {
    margin: 0;
    font-size: 14px;
    color: #555;
  }

  .qb-badge {
    position: absolute;
    top: -10px;
    right: -10px;
    background: #16c800;
    color: #fff;
    font-size: 12px;
    padding: 6px 10px;
    border-radius: 999px;
  }

  .qb-input {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    margin-top: 8px;
    border-radius: 8px;
    border: 1px solid #ddd;
  }

  .qb-input:focus {
    border-color: #16c800;
    outline: none;
    box-shadow: 0 0 4px rgba(22,200,0,0.4);
  }

  .qb-summary {
    padding: 24px;
    border-radius: 12px;
    background: #f8f8f8;
    font-size: 18px;
  }

  .qb-breakdown {
    margin-top: 16px;
    font-size: 14px;
    color: #333;
  }

  .qb-breakdown-section {
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
    background: #fff;
  }

  .qb-breakdown-section h4 {
    margin-top: 0;
    margin-bottom: 6px;
    font-size: 16px;
  }

  .qb-breakdown-section ul {
    margin: 4px 0;
    padding-left: 18px;
  }

  .qb-total {
    font-size: 20px;
    font-weight: bold;
    color: #16c800;
    margin-top: 12px;
  }

  @media (max-width: 600px) {
    .quote-builder {
      padding: 16px;
    }
  }
</style>

<div class="quote-builder">

  <!-- STEP 1 -->
  <div class="qb-step">
    <h3>What service are you interested in?</h3>
    <div class="qb-options">
      <div class="qb-card" onclick="selectService('social')">
        <h4>Social Media Marketing</h4>
        <p>Monthly content, engagement, and brand growth.</p>
      </div>
      <div class="qb-card" onclick="selectService('website')">
        <h4>Website Design & Development</h4>
        <p>Custom SEO-optimized Squarespace or WordPress websites.</p>
      </div>
      <div class="qb-card" onclick="selectService('operations')">
        <h4>Operations & Systems</h4>
        <p>Audits, systems, SOPs, and process optimization.</p>
      </div>
    </div>
  </div>

  <!-- STEP 2 -->
  <div class="qb-step" id="packageStep" style="display:none;">
    <h3>Select a package</h3>
    <div class="qb-options" id="packageOptions"></div>
  </div>

  <!-- STEP 3 -->
  <div class="qb-step" id="variableStep" style="display:none;">
    <h3>Customize your estimate</h3>
    <label>Number of pages or platforms</label>
    <input type="number" id="quantityInput" class="qb-input" value="5" min="1">
  </div>

  <!-- SUMMARY -->
  <div class="qb-step qb-summary" id="summary" style="display:none;">
    <strong>Estimated Investment:</strong>
    <div id="priceOutput" class="qb-total"></div>
    <div class="qb-breakdown" id="breakdown"></div>
  </div>

</div>

<script>
  let service = null;
  let basePrice = 0;
  let packageDetails = {};

  function selectService(type) {
    service = type;
    document.getElementById('packageStep').style.display = 'block';
    document.getElementById('variableStep').style.display = 'none';
    document.getElementById('summary').style.display = 'none';

    const options = document.getElementById('packageOptions');
    options.innerHTML = '';

    let packages = [];

    if (type === 'social') {
      packages = [
        { name: 'Foundation', price: 750, desc: ['Consistent posting and brand presence'], popular: false },
        { name: 'Growth', price: 1500, desc: ['Engagement, reach, consistency'], popular: true },
        { name: 'Scale', price: 3000, desc: ['High-volume content, video, strategy'], popular: false }
      ];
    }

    if (type === 'website') {
      packages = [
        {
          name: 'Basic Website',
          price: 2500,
          desc: [
            'Up to 5 pages',
            'No CRM, no integrations',
            'Monthly hosting fees: $40/month'
          ],
          popular: false
        },
        {
          name: 'Intermediate Website',
          price: 5000,
          desc: [
            'Lead-focused site',
            'CRM integration, automations',
            'E-commerce and conversion strategy',
            'Monthly hosting fees: $40/month'
          ],
          popular: true
        },
        {
          name: 'Advanced Website',
          price: 9000,
          desc: [
            'Scalable site',
            'Advanced integrations & automations',
            'Advanced SEO and e-commerce',
            'Monthly hosting fees: $40/month'
          ],
          popular: false
        }
      ];
    }

    if (type === 'operations') {
      packages = [
        { name: 'Systems Audit', price: 2500, desc: ['Operational review', 'Clear roadmap'], popular: false },
        { name: 'System Design & Implementation', price: 5000, desc: ['Build and implement systems'], popular: true },
        { name: 'SOP Development', price: 2000, desc: ['Document processes and team workflow'], popular: false }
      ];
    }

    packages.forEach(pkg => {
      const card = document.createElement('div');
      card.className = 'qb-card';
      card.onclick = () => selectPackage(pkg);

      card.innerHTML = `
        ${pkg.popular ? '<div class="qb-badge">Most Popular</div>' : ''}
        <h4>${pkg.name} â€” $${pkg.price.toLocaleString()}</h4>
        <p>${pkg.desc.join(', ')}</p>
      `;

      options.appendChild(card);
    });
  }

  function selectPackage(pkg) {
    basePrice = pkg.price;
    packageDetails = pkg;
    document.getElementById('variableStep').style.display = 'block';
    document.getElementById('summary').style.display = 'block';
    calculate();
  }

  function calculate() {
    const qty = parseInt(document.getElementById('quantityInput').value || 0);
    let total = basePrice;
    let breakdownHTML = '';

    // Base price section
    breakdownHTML += '<div class="qb-breakdown-section">';
    breakdownHTML += `<h4>Base Package</h4><ul><li>$${basePrice.toLocaleString()}</li></ul></div>`;

    // Hosting section
    if (service === 'website') {
      total += 40;
      breakdownHTML += '<div class="qb-breakdown-section">';
      breakdownHTML += `<h4>Hosting</h4><ul><li>$40/month</li></ul></div>`;
    }

    // Extra pages/platforms
    if (service === 'website' && qty > 5) {
      const extra = (qty - 5) * 200;
      total += extra;
      breakdownHTML += '<div class="qb-breakdown-section">';
      breakdownHTML += `<h4>Extra Pages</h4><ul><li>$${extra}</li></ul></div>`;
    }

    if (service === 'social' && qty > 1) {
      const extra = (qty - 1) * 300;
      total += extra;
      breakdownHTML += '<div class="qb-breakdown-section">';
      breakdownHTML += `<h4>Extra Platforms</h4><ul><li>$${extra}/month</li></ul></div>`;
    }

    // Included features section
    if (packageDetails.desc && packageDetails.desc.length > 0) {
      breakdownHTML += '<div class="qb-breakdown-section">';
      breakdownHTML += '<h4>Included Features</h4><ul>';
      packageDetails.desc.forEach(item => {
        breakdownHTML += `<li>${item}</li>`;
      });
      breakdownHTML += '</ul></div>';
    }

    // Total
    document.getElementById('priceOutput').innerText =
      service === 'social' ? `$${total.toLocaleString()} / month` : `$${total.toLocaleString()}`;
    document.getElementById('breakdown').innerHTML = breakdownHTML;
  }

  document.getElementById('quantityInput').addEventListener('input', calculate);
</script>
